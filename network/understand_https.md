# HTTPS

Https实际上就是载Http的基础上建立了SSL加密层，对传输数据进行加密，是Http协议的安全版。他适用于安全敏感的通讯，例如支付交易方面。

用Http协议（port N.80）通讯的过程中，通讯的内容使用不加密的明文，所以容易导致各种各样的安全问题，比如数据泄露，数据篡改，数据劫持，导致我们无法证明数据被正确的传输。

再来看Https协议（port N.443），Https会先和SSL通信，再由SSL和TCP通信。TLS/SSL的功能实现主要依赖于三类基本加密算法：非对称加密，对称加密，散列函数（MD5 SHA）。

下面我来介绍一下这三种算法：

1. 非对称加密：名字起源于1对N的特性。主要实现身份认证和密钥协商

   服务器端掌握私钥（1）， 客户端共享公钥（N），当客户端向服务器端发送信息时，通过公钥加密，而内容只能通过私钥解密，防止了传输过程中信息别截取

   缺点：

   * 因为公钥时公开的，所以针对私钥加密的内容可能会被黑客截获然后使用公钥解密。

2. 对称加密：名字起源于1对1的特性。主要实现信息安全传递

   SSL先通过非对称加密给服务器发送了一段只有两个人知道的“密钥”（这里的密钥其实就是客户端发送的连接密码，并不是服务器端解密的私钥）。之后简历通信交换报文阶段则使用对称加密。这种加密需要用相同的密钥解密。对称加密和非对称加密解决的信息被窃听的问题

3.  数字签名：主要为了校验信息的完整性，防止被篡改

   大概流程就是讲一段文本用Hash的方式生成一段消息摘要，然后用发送者的私钥加密生成数字签名与原文一起发送给接收者。接收者收到信息后只有用发送者的公钥才能解密被加密的数字签名并返回信息摘要，然后对原文用相同的Hash函数生成信息摘要。对比两段信息摘要，如果一致就能证明信息时完整的

验证公钥的可靠性：

证书颁发机构，简称CA（Certificate Authority）。CA数量并不多，一般客户端内置了所有受信任的证书。

当客户端想服务器发出请求是，服务器返回证书文件。客户端读取证书中的相关的明文信息，采用Hash计算得到证书摘要，然后利用CA的公钥解密签名数据得到证书摘要，如果一致，则可以确认证书的合法性

大概的流程：

![img](https://user-gold-cdn.xitu.io/2019/4/22/16a45839ceacbb52?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



HTTPS相对于HTTP的区别：

1. 端口不同， HTTP是80，HTTPS是443
2. HTTPS需要用到SSL证书
3. 对于搜素引擎更友好，优先索引HTTPS网页，提升用户安全

HTTPS的缺点：

1. 从证书的选择购买到部署，比较耗时耗力
2. 加密通信会消耗更多的CPU以及内存资源（可以通过SLB和CDN解决）



以上内容是我自己整理的学习笔记，许多不恰当处，请多多包涵

建议阅读原文：https://juejin.im/post/6844903830916694030